## lib_http - Library for HTTP support


### Table Of Contents
<a href="#table-of-contents"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Toc -->
&nbsp;&nbsp;&bull;&nbsp;  [Functions](#functions)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [Inputs](#inputs)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [Sources](#sources)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [Dependencies](#dependencies)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [In Memory DB](#in-memory-db)<br/>

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Toc -->

### Functions
<a href="#functions"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Functions -->
Functions exported from this namespace:

```c++
// Get single line of HTTP ptotocol
bool lib_http::DecodeLine(strptr &buf, strptr &result) 
```

```c++
// decode HTTP request
bool lib_http::DecodeRequest(strptr &buf, http::Request &request) 
```

```c++
// Encode HTTP response
void lib_http::EncodeResponse(cstring &buf, http::Response &response) 
```

```c++
// Get HTTP message length
// TODO content-length, chunked
i32 lib_http::GetMsgLen(strptr buf) 
```

```c++
// Whether http list contains token
bool lib_http::ListContainsQ(strptr list, strptr token) 
```

```c++
strptr &lib_http::List_curs_Access(List_curs &curs) 
```

```c++
void lib_http::List_curs_Next(List_curs &curs) 
```

```c++
void lib_http::List_curs_Reset(List_curs &curs, strptr list) 
```

```c++
bool lib_http::List_curs_ValidQ(List_curs &curs) 
```

```c++
// Add request header
bool lib_http::SetRequestHeader(http::Request &request, strptr name, strptr value) 
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Functions -->

### Inputs
<a href="#inputs"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Inputs -->
`lib_http` takes the following tables on input:
|Ssimfile|Comment|
|---|---|
|[dmmeta.dispsigcheck](/txt/ssimdb/dmmeta/dispsigcheck.md)|Check signature of input data against executable's version|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Inputs -->

### Sources
<a href="#sources"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Sources -->
The source code license is GPL
The following source files are part of this tool:

|Source File|Comment|
|---|---|
|[cpp/gen/lib_http_gen.cpp](/cpp/gen/lib_http_gen.cpp)||
|[cpp/lib_http/lib_http.cpp](/cpp/lib_http/lib_http.cpp)||
|[include/gen/lib_http_gen.h](/include/gen/lib_http_gen.h)||
|[include/gen/lib_http_gen.inl.h](/include/gen/lib_http_gen.inl.h)||
|[include/lib_http.h](/include/lib_http.h)||

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Sources -->

### Dependencies
<a href="#dependencies"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Dependencies -->
The build target depends on the following libraries
|Target|Comment|
|---|---|
|[algo_lib](/txt/lib/algo_lib/README.md)|Support library for all executables|
|[lib_prot](/txt/lib/lib_prot/README.md)|Library covering all protocols|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Dependencies -->

### In Memory DB
<a href="#in-memory-db"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Imdb -->
`lib_http` generated code creates the tables below.
All allocations are done through global `lib_http::_db` [lib_http.FDb](#lib_http-fdb) structure
|Ctype|Ssimfile|Create|Access|
|---|---|---|---|
|[lib_http.FStatus](#lib_http-fstatus)|[httpdb.status](/txt/ssimdb/httpdb/status.md)|FDb.status (Inlary)|**static**|
|[lib_http.FDb](#lib_http-fdb)||FDb._db (Global)|

#### lib_http.FStatus - 
<a href="#lib_http-fstatus"></a>

#### lib_http.FStatus Fields
<a href="#lib_http-fstatus-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|lib_http.FStatus.base|[httpdb.Status](/txt/ssimdb/httpdb/status.md)|[Base](/txt/ssimdb/httpdb/status.md)|||

#### Struct FStatus
<a href="#struct-fstatus"></a>
*Note:* field ``lib_http.FStatus.base`` has reftype ``base`` so the fields of [httpdb.Status](/txt/ssimdb/httpdb/status.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/lib_http_gen.h](/include/gen/lib_http_gen.h)
```
struct FStatus { // lib_http.FStatus
    algo::Smallstr50   status;   //
    // func:lib_http.FStatus..Ctor
    inline               FStatus() __attribute__((nothrow));
};
```

#### lib_http.FDb - 
<a href="#lib_http-fdb"></a>

#### lib_http.FDb Fields
<a href="#lib_http-fdb-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|lib_http.FDb._db|[lib_http.FDb](/txt/lib/lib_http/README.md#lib_http-fdb)|[Global](/txt/exe/amc/reftypes.md#global)|||
|lib_http.FDb.status|[lib_http.FStatus](/txt/lib/lib_http/README.md#lib_http-fstatus)|[Inlary](/txt/exe/amc/reftypes.md#inlary)|||

#### Struct FDb
<a href="#struct-fdb"></a>
Generated by [amc](/txt/exe/amc/README.md) into [include/gen/lib_http_gen.h](/include/gen/lib_http_gen.h)
```
struct FDb { // lib_http.FDb
    u128              status_data[sizeu128(lib_http::FStatus,40)];   // place for data
    i32               status_n;                                      // number of elems current in existence
    enum { status_max = 40 };
    lib_http::trace   trace;                                         //
};
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Imdb -->

