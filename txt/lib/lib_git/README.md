## lib_git - Helpful git wrappers


### Table Of Contents
<a href="#table-of-contents"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Toc -->
&nbsp;&nbsp;&bull;&nbsp;  [Functions](#functions)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [Inputs](#inputs)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [Sources](#sources)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [Dependencies](#dependencies)<br/>
&nbsp;&nbsp;&bull;&nbsp;  [In Memory DB](#in-memory-db)<br/>

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Toc -->

### Functions
<a href="#functions"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Functions -->
Functions exported from this namespace:

```c++
// Return current git ref, e.g. ac18e6cb142a86136b58561f2f1d63e3ff4b749e
// Any error output is suppressed.
tempstr lib_git::CurrentRef() 
```

```c++
// Return symbolic name for current branch, e.g. AB-12345
// Any error output is suppressed.
tempstr lib_git::CurrentBranch() 
```

```c++
// Return date + gitref string describing most recent commit, e.g. 2017-05-24.21f8ce8
tempstr lib_git::ShortRef() 
```

```c++
// Return most recent log entry
// If there was a merge, this will describe 2 or more commits. If there was a straight
// commit, there will be just 1 entry (compare with git log -1)
tempstr lib_git::LastCommitLog() 
```

```c++
// Check that specified DIR is free of any git modifications.
// Return a string describing modified files, or an empty string if none
tempstr lib_git::GitModifiedFiles(strptr dir) 
```

```c++
// Check that specified DIR is free of any git modifications.
// If failed, throw exception with MSG.
void lib_git::CheckGitCleanX(strptr dir, strptr msg) 
```

```c++
// Return TRUE if REMOTE is a valid git remote
bool lib_git::GitRemoteExistsQ(strptr remote) 
```

```c++
// Return TRUE if BRANCH is a valid git branch
bool lib_git::GitBranchExistsQ(strptr branch) 
```

```c++
// Get configured user: name <email>
tempstr lib_git::GetUser() 
```

```c++
// Get year of latest commit of given file
u32 lib_git::GetLastCommitYear(strptr file) 
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Functions -->

### Inputs
<a href="#inputs"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Inputs -->
`lib_git` takes the following tables on input:
|Ssimfile|Comment|
|---|---|
|[dmmeta.dispsigcheck](/txt/ssimdb/dmmeta/dispsigcheck.md)|Check signature of input data against executable's version|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Inputs -->

### Sources
<a href="#sources"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Sources -->
The source code license is GPL
The following source files are part of this tool:

|Source File|Comment|
|---|---|
|[cpp/gen/lib_git_gen.cpp](/cpp/gen/lib_git_gen.cpp)||
|[cpp/lib/lib_git.cpp](/cpp/lib/lib_git.cpp)||
|[include/gen/lib_git_gen.h](/include/gen/lib_git_gen.h)||
|[include/gen/lib_git_gen.inl.h](/include/gen/lib_git_gen.inl.h)||
|[include/lib_git.h](/include/lib_git.h)||

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Sources -->

### Dependencies
<a href="#dependencies"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Dependencies -->
The build target depends on the following libraries
|Target|Comment|
|---|---|
|[algo_lib](/txt/lib/algo_lib/README.md)|Support library for all executables|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Dependencies -->

### In Memory DB
<a href="#in-memory-db"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Imdb -->
`lib_git` generated code creates the tables below.
All allocations are done through global `lib_git::_db` [lib_git.FDb](#lib_git-fdb) structure
|Ctype|Ssimfile|Create|Access|
|---|---|---|---|
|[lib_git.FDb](#lib_git-fdb)||FDb._db (Global)|

#### lib_git.FDb - In-memory database for lib_git
<a href="#lib_git-fdb"></a>

#### lib_git.FDb Fields
<a href="#lib_git-fdb-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|lib_git.FDb._db|[lib_git.FDb](/txt/lib/lib_git/README.md#lib_git-fdb)|[Global](/txt/exe/amc/reftypes.md#global)|||

#### Struct FDb
<a href="#struct-fdb"></a>
Generated by [amc](/txt/exe/amc/README.md) into [include/gen/lib_git_gen.h](/include/gen/lib_git_gen.h)
```
struct FDb { // lib_git.FDb: In-memory database for lib_git
    lib_git::trace   trace;   //
};
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Imdb -->

