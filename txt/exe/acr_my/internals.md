## acr_my - Internals


### Table Of Contents
<a href="#table-of-contents"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Toc -->
* [Description](#description)
* [Sources](#sources)
* [Dependencies](#dependencies)
* [In Memory DB](#in-memory-db)

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Toc -->

### Description
<a href="#description"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Description -->
for usage, see [acr_my - ACR <-> MariaDB adaptor](/txt/exe/acr_my/README.md)

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Description -->

### Sources
<a href="#sources"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Sources -->
The source code license is GPL
The following source files are part of this tool:

|Source File|Comment|
|---|---|
|[cpp/acr_my/acr_my.cpp](/cpp/acr_my/acr_my.cpp)||
|[cpp/gen/acr_my_gen.cpp](/cpp/gen/acr_my_gen.cpp)||
|[include/gen/acr_my_gen.h](/include/gen/acr_my_gen.h)||
|[include/gen/acr_my_gen.inl.h](/include/gen/acr_my_gen.inl.h)||

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Sources -->

### Dependencies
<a href="#dependencies"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Dependencies -->
The build target depends on the following libraries
|Target|Comment|
|---|---|
|[algo_lib](/txt/lib/algo_lib/README.md)|Support library for all executables|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Dependencies -->

### In Memory DB
<a href="#in-memory-db"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Imdb -->
`acr_my` generated code creates the tables below.
All allocations are done through global `acr_my::_db` [acr_my.FDb](#acr_my-fdb) structure
|Ctype|Ssimfile|Create|Access|
|---|---|---|---|
|[acr_my.FDb](#acr_my-fdb)||FDb._db (Global)|
|[acr_my.FNsdb](#acr_my-fnsdb)|[dmmeta.nsdb](/txt/ssimdb/dmmeta/nsdb.md)|FDb.nsdb (Lary)|nsdb (Lary, by rowid)|
|[acr_my.FSsimfile](#acr_my-fssimfile)|[dmmeta.ssimfile](/txt/ssimdb/dmmeta/ssimfile.md)|FDb.ssimfile (Lary)|ssimfile (Lary, by rowid)|

#### acr_my.FDb - In-memory database for acr_my
<a href="#acr_my-fdb"></a>

#### acr_my.FDb Fields
<a href="#acr_my-fdb-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|acr_my.FDb.R|[algo_lib.Replscope](/txt/lib/algo_lib/README.md#algo_lib-replscope)|[Val](/txt/exe/amc/reftypes.md#val)|||
|acr_my.FDb.data_dir|[algo.cstring](/txt/protocol/algo/cstring.md)|[Val](/txt/exe/amc/reftypes.md#val)|||
|acr_my.FDb.data_logdir|[algo.cstring](/txt/protocol/algo/cstring.md)|[Val](/txt/exe/amc/reftypes.md#val)|||
|acr_my.FDb.ary_ns|[algo.cstring](/txt/protocol/algo/cstring.md)|[Tary](/txt/exe/amc/reftypes.md#tary)|||
|acr_my.FDb.started|bool|[Val](/txt/exe/amc/reftypes.md#val)|||
|acr_my.FDb._db|[acr_my.FDb](/txt/exe/acr_my/internals.md#acr_my-fdb)|[Global](/txt/exe/amc/reftypes.md#global)|||
|acr_my.FDb.cmdline|[command.acr_my](/txt/protocol/command/README.md#command-acr_my)|[Val](/txt/exe/amc/reftypes.md#val)|||
|acr_my.FDb.nsdb|[acr_my.FNsdb](/txt/exe/acr_my/internals.md#acr_my-fnsdb)|[Lary](/txt/exe/amc/reftypes.md#lary)|||
|acr_my.FDb.ssimfile|[acr_my.FSsimfile](/txt/exe/acr_my/internals.md#acr_my-fssimfile)|[Lary](/txt/exe/amc/reftypes.md#lary)|||

#### Struct FDb
<a href="#struct-fdb"></a>
Generated by [amc](/txt/exe/amc/README.md) into [include/gen/acr_my_gen.h](/include/gen/acr_my_gen.h)
```
struct FDb { // acr_my.FDb: In-memory database for acr_my
    algo_lib::Replscope   R;                   //
    algo::cstring         data_dir;            //
    algo::cstring         data_logdir;         //
    algo::cstring*        ary_ns_elems;        // pointer to elements
    u32                   ary_ns_n;            // number of elements in array
    u32                   ary_ns_max;          // max. capacity of array before realloc
    bool                  started;             //   false
    command::acr_my       cmdline;             //
    acr_my::FNsdb*        nsdb_lary[32];       // level array
    i32                   nsdb_n;              // number of elements in array
    acr_my::FSsimfile*    ssimfile_lary[32];   // level array
    i32                   ssimfile_n;          // number of elements in array
    acr_my::trace         trace;               //
};
```

#### acr_my.FNsdb - Annotate ssimdb namespaces
<a href="#acr_my-fnsdb"></a>

#### acr_my.FNsdb Fields
<a href="#acr_my-fnsdb-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|acr_my.FNsdb.base|[dmmeta.Nsdb](/txt/ssimdb/dmmeta/nsdb.md)|[Base](/txt/ssimdb/dmmeta/nsdb.md)|||
|acr_my.FNsdb.select|bool|[Val](/txt/exe/amc/reftypes.md#val)|||

#### Struct FNsdb
<a href="#struct-fnsdb"></a>
*Note:* field ``acr_my.FNsdb.base`` has reftype ``base`` so the fields of [dmmeta.Nsdb](/txt/ssimdb/dmmeta/nsdb.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/acr_my_gen.h](/include/gen/acr_my_gen.h)
```
struct FNsdb { // acr_my.FNsdb
    algo::Smallstr16   ns;        //
    algo::Comment      comment;   //
    bool               select;    //   false
private:
    // func:acr_my.FNsdb..Ctor
    inline               FNsdb() __attribute__((nothrow));
    friend acr_my::FNsdb&       nsdb_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend acr_my::FNsdb*       nsdb_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 nsdb_RemoveLast() __attribute__((nothrow));
};
```

#### acr_my.FSsimfile - File with ssim tuples
<a href="#acr_my-fssimfile"></a>

#### acr_my.FSsimfile Fields
<a href="#acr_my-fssimfile-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|acr_my.FSsimfile.base|[dmmeta.Ssimfile](/txt/ssimdb/dmmeta/ssimfile.md)|[Base](/txt/ssimdb/dmmeta/ssimfile.md)|||

#### Struct FSsimfile
<a href="#struct-fssimfile"></a>
*Note:* field ``acr_my.FSsimfile.base`` has reftype ``base`` so the fields of [dmmeta.Ssimfile](/txt/ssimdb/dmmeta/ssimfile.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/acr_my_gen.h](/include/gen/acr_my_gen.h)
```
struct FSsimfile { // acr_my.FSsimfile
    algo::Smallstr50    ssimfile;   //
    algo::Smallstr100   ctype;      //
private:
    // func:acr_my.FSsimfile..Ctor
    inline               FSsimfile() __attribute__((nothrow));
    friend acr_my::FSsimfile&   ssimfile_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend acr_my::FSsimfile*   ssimfile_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 ssimfile_RemoveLast() __attribute__((nothrow));
};
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Imdb -->

