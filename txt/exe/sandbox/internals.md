## sandbox - Internals


### Table Of Contents
<a href="#table-of-contents"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Toc -->
* [Description](#description)
* [Sources](#sources)
* [Dependencies](#dependencies)
* [In Memory DB](#in-memory-db)

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Toc -->

### Description
<a href="#description"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Description -->
for usage, see [sandbox - Sandbox - sandbox management tool](/txt/exe/sandbox/README.md)

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Description -->

### Sources
<a href="#sources"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Sources -->
The source code license is GPL
The following source files are part of this tool:

|Source File|Comment|
|---|---|
|[cpp/gen/sandbox_gen.cpp](/cpp/gen/sandbox_gen.cpp)||
|[cpp/sandbox.cpp](/cpp/sandbox.cpp)||
|[include/gen/sandbox_gen.h](/include/gen/sandbox_gen.h)||
|[include/gen/sandbox_gen.inl.h](/include/gen/sandbox_gen.inl.h)||
|[include/sandbox.h](/include/sandbox.h)||

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Sources -->

### Dependencies
<a href="#dependencies"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Dependencies -->
The build target depends on the following libraries
|Target|Comment|
|---|---|
|[algo_lib](/txt/lib/algo_lib/README.md)|Support library for all executables|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Dependencies -->

### In Memory DB
<a href="#in-memory-db"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Imdb -->
`sandbox` generated code creates the tables below.
All allocations are done through global `sandbox::_db` [sandbox.FDb](#sandbox-fdb) structure
|Ctype|Ssimfile|Create|Access|
|---|---|---|---|
|[sandbox.FDb](#sandbox-fdb)||FDb._db (Global)|
|[sandbox.FSandbox](#sandbox-fsandbox)|[dev.sandbox](/txt/ssimdb/dev/sandbox.md)|FDb.sandbox (Lary)|sandbox (Lary, by rowid)|ind_sandbox (Thash, hash field sandbox)|
|[sandbox.FSbpath](#sandbox-fsbpath)|[dev.sbpath](/txt/ssimdb/dev/sbpath.md)|FDb.sbpath (Lary)|sbpath (Lary, by rowid)|

#### sandbox.FDb - In-memory database for sandbox
<a href="#sandbox-fdb"></a>

#### sandbox.FDb Fields
<a href="#sandbox-fdb-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|sandbox.FDb._db|[sandbox.FDb](/txt/exe/sandbox/internals.md#sandbox-fdb)|[Global](/txt/exe/amc/reftypes.md#global)|||
|sandbox.FDb.cmdline|[command.sandbox](/txt/protocol/command/README.md#command-sandbox)|[Val](/txt/exe/amc/reftypes.md#val)|||
|sandbox.FDb.sandbox|[sandbox.FSandbox](/txt/exe/sandbox/internals.md#sandbox-fsandbox)|[Lary](/txt/exe/amc/reftypes.md#lary)|||
|sandbox.FDb.ind_sandbox|[sandbox.FSandbox](/txt/exe/sandbox/internals.md#sandbox-fsandbox)|[Thash](/txt/exe/amc/reftypes.md#thash)|||
|sandbox.FDb.sbpath|[sandbox.FSbpath](/txt/exe/sandbox/internals.md#sandbox-fsbpath)|[Lary](/txt/exe/amc/reftypes.md#lary)|||

#### Struct FDb
<a href="#struct-fdb"></a>
Generated by [amc](/txt/exe/amc/README.md) into [include/gen/sandbox_gen.h](/include/gen/sandbox_gen.h)
```
struct FDb { // sandbox.FDb: In-memory database for sandbox
    command::sandbox      cmdline;                     //
    sandbox::FSandbox*    sandbox_lary[32];            // level array
    i32                   sandbox_n;                   // number of elements in array
    sandbox::FSandbox**   ind_sandbox_buckets_elems;   // pointer to bucket array
    i32                   ind_sandbox_buckets_n;       // number of elements in bucket array
    i32                   ind_sandbox_n;               // number of elements in the hash table
    sandbox::FSbpath*     sbpath_lary[32];             // level array
    i32                   sbpath_n;                    // number of elements in array
    sandbox::trace        trace;                       //
};
```

#### sandbox.FSandbox - Registered sandbox
<a href="#sandbox-fsandbox"></a>

#### sandbox.FSandbox Fields
<a href="#sandbox-fsandbox-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|sandbox.FSandbox.base|[dev.Sandbox](/txt/ssimdb/dev/sandbox.md)|[Base](/txt/ssimdb/dev/sandbox.md)|||
|sandbox.FSandbox.dir|[algo.cstring](/txt/protocol/algo/cstring.md)|[Val](/txt/exe/amc/reftypes.md#val)|||
|sandbox.FSandbox.select|bool|[Val](/txt/exe/amc/reftypes.md#val)|||

#### Struct FSandbox
<a href="#struct-fsandbox"></a>
*Note:* field ``sandbox.FSandbox.base`` has reftype ``base`` so the fields of [dev.Sandbox](/txt/ssimdb/dev/sandbox.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/sandbox_gen.h](/include/gen/sandbox_gen.h)
```
struct FSandbox { // sandbox.FSandbox
    sandbox::FSandbox*   ind_sandbox_next;      // hash next
    u32                  ind_sandbox_hashval;   // hash value
    algo::Smallstr50     sandbox;               //
    algo::Comment        comment;               //
    algo::cstring        dir;                   //
    bool                 select;                //   false
    // func:sandbox.FSandbox..AssignOp
    inline sandbox::FSandbox& operator =(const sandbox::FSandbox &rhs) = delete;
    // func:sandbox.FSandbox..CopyCtor
    inline               FSandbox(const sandbox::FSandbox &rhs) = delete;
private:
    // func:sandbox.FSandbox..Ctor
    inline               FSandbox() __attribute__((nothrow));
    // func:sandbox.FSandbox..Dtor
    inline               ~FSandbox() __attribute__((nothrow));
    friend sandbox::FSandbox&   sandbox_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend sandbox::FSandbox*   sandbox_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 sandbox_RemoveAll() __attribute__((nothrow));
    friend void                 sandbox_RemoveLast() __attribute__((nothrow));
};
```

#### sandbox.FSbpath - Extra files to copy into the sandbox
<a href="#sandbox-fsbpath"></a>

#### sandbox.FSbpath Fields
<a href="#sandbox-fsbpath-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|sandbox.FSbpath.base|[dev.Sbpath](/txt/ssimdb/dev/sbpath.md)|[Base](/txt/ssimdb/dev/sbpath.md)|||

#### Struct FSbpath
<a href="#struct-fsbpath"></a>
*Note:* field ``sandbox.FSbpath.base`` has reftype ``base`` so the fields of [dev.Sbpath](/txt/ssimdb/dev/sbpath.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/sandbox_gen.h](/include/gen/sandbox_gen.h)
```
struct FSbpath { // sandbox.FSbpath
    algo::Smallstr50   sbpath;    //
    algo::Comment      comment;   //
private:
    // func:sandbox.FSbpath..Ctor
    inline               FSbpath() __attribute__((nothrow));
    friend sandbox::FSbpath&    sbpath_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend sandbox::FSbpath*    sbpath_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 sbpath_RemoveAll() __attribute__((nothrow));
    friend void                 sbpath_RemoveLast() __attribute__((nothrow));
};
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Imdb -->

